@model Form

@{
    ViewData["Title"] = "Форма ввода";
}

<head>
    <style>
        td {
            border: 1px solid gray;
            width: 200px;
        }

        input[type="number"], textarea {
            background-color: #d9e1f2;
            width: 100%;
            -moz-appearance: textfield;
        }

        input[type="text"], textarea {
            background-color: #c6e0b4;
            width: 100%;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }

    </style>
    
</head>

@section Scripts
{
    
    <script src="jquery-3.6.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var formData = {
                ValueA: $("#valueA").val(),
                ValueB: $("#valueB").val(),
                ValueC: $("#valueC").val(),
                Discriminant: $("#discriminant").val(),
                FirstResult: $("#firstResult").val(),
                SecondResult: $("#secondResult").val()
            };

            var valueA = $("#valueA").val();
                    var valueB = $("#valueB").val();
                    var valueC = $("#valueC").val();
                    var discriminant = $("#discriminant").val();

            $(function () {
                $(".saveButton").click(function () {
                    $.ajax({
                        url: 'home/postform',
                        type: 'post',
                        contentType: 'application/json;',
                        dataType: 'json',
                        data: JSON.stringify({ formTransfer: formData }),
                        success: function (data) {
                            if (data.success == true) {
                                alert('Success');
                            }
                            else {
                                alert(data.status);
                            }
                        },
                        error: function (error) {
                            alert(error.statusText);
                        }
                    });
                });
            });

            $(function () {
                var onChanged = function () {
                    alert('Ввод данных');
                }
                $(function () {
                    $(".formTable").on("change", onChanged)
                });
            });

            $(function () {
                $(".showButton").click(function () {
                    var valueA = $("#valueA").val();
                    var valueB = $("#valueB").val();
                    var valueC = $("#valueC").val();
                    var discriminant = $("#discriminant").val();
                    alert(valueA + valueB + valueC + discriminant);
                });
            });

            $(function () {
                $(".fillButton").click(function () {
                    $('#valueA').val('5');
                    $('#valueB').val('6');
                    $('#valueC').val('7');
                    $('#discriminant').val('13');
                });
            });

            $(function () {
                $(".getButton").click(function () {
                    $.ajax({
                        type: 'get',
                        url: 'home/getform',
                        success: function (data) {
                            $('#valueA').val(data.valueA);
                            $('#valueB').val(data.valueB);
                            $('#valueC').val(data.valueC);
                            $('#discriminant').val(data.discriminant);
                            $('#firstResult').val(data.firstResult);
                            $('#secondResult').val(data.secondResult);
                        },
                        error: function (error) {
                            alert(error.statusText + ': Дискриминант должен быть больше нуля');
                        }
                    });
                });
            });

        });

    </script>
}


<div class="text-center">
    <table>
        <tr>
            <td style="border:0px"></td>
            <td style="border:0px"><input type="button" class="saveButton" value="Сохранить" /></td>
            <td style="border:0px"><input type="button" class="fillButton" value="Заполнить таблицу" /></td>
            <td style="border:0px"><input type="button" class="showButton" value="Показать значения" /></td>
            <td style="border:0px"><input type="button" class="getButton" value="Обновить таблицу" /></td>
        </tr>
    </table>

    <p></p>

    <table class="formTable">
        <thread>
            <tr align="left"><td>Индикатор</td><td>Значение</td></tr>
            <tr align="left">
                <td>@Model.ValueA.Title</td>
                <td><input type="number" id="valueA" value="@Model.ValueA.Value"/></td>
            </tr>
            <tr align="left">
                <td>@Model.ValueB.Title</td>
                <td><input type="number" id="valueB" value="@Model.ValueB.Value" /></td>
            </tr>
            <tr align="left">
                <td>@Model.ValueC.Title</td>
                <td><input type="number" id="valueC" value="@Model.ValueC.Value" /></td>
            </tr>
            <tr align="left">
                <td>@Model.Discriminant.Title</td>
                <td><input readonly type="text" id="discriminant" value="@Model.Discriminant.Value"/></td>
            </tr>
            <tr align="left">
                <td>@Model.FirstResult.Title</td>
                <td><input readonly type="text" id="firstResult" value="@Model.FirstResult.Value"/></td>
            </tr>
            <tr align="left">
                <td>@Model.SecondResult.Title</td>
                <td><input readonly type="text" id="secondResult" value="@Model.SecondResult.Value"/></td>
            </tr>
        </thread>
    </table>
</div>

